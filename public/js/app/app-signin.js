// Generated by CoffeeScript 1.6.3
(function(App, $, window) {
  App.signin = {
    init: function() {
      if ($('#sigin-in').length > 0) {
        $('#sigin-in').on('submit', function(e) {
          var $this;
          e.preventDefault();
          $this = $(this);
          $.ajax({
            type: $this.attr('method'),
            data: $this.serialize(),
            url: $this.attr('action'),
            dataType: 'json'
          }).done(function(data) {
            if (data.error) {
              $.msgGrowl({
                type: 'error',
                title: 'Error',
                text: data.error
              });
              true;
            } else if (data.token) {
              window.location.href = '/';
            }
            return true;
          }).fail(function(jqXHR, data) {
            $.msgGrowl({
              type: 'error',
              title: 'Error',
              text: 'An error has occurred, please try again!'
            });
            return false;
          });
          return false;
        });
      }
      return true;
    }
  };
  return true;
})(App, jQuery, window);
